<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Marco ¬∑ AppBase + MiniApps</title>
    
    <link rel="stylesheet" href="./styles/tokens.css" />
    <link rel="stylesheet" href="./styles/components.css" />

  </head>
  <body>
    <header class="app-header">
      <!-- BEGIN: logo-picture-responsive -->
      <picture>
        <source srcset="/Projeto-marco/assets/app/brand/logo-dark-800.webp 800w, /Projeto-marco/assets/app/brand/logo-dark-400.webp 400w" media="(prefers-color-scheme: dark)" type="image/webp">
        <source srcset="/Projeto-marco/assets/app/brand/logo-light-800.webp 800w, /Projeto-marco/assets/app/brand/logo-light-400.webp 400w" media="(prefers-color-scheme: light)" type="image/webp">
        <img src="/Projeto-marco/assets/app/brand/logo-light-400.webp" alt="Logo 5 Horas" width="400" height="100" loading="eager" decoding="async">
      </picture>
      <!-- END: logo-picture-responsive -->
      <div class="logo-area">
        <div class="app-badge" data-i18n="app.badge">Marco</div>
        <div class="title-group">
          <h1 data-i18n="app.header.title">Marco ¬∑ AppBase + MiniApps</h1>
          <p data-i18n="app.header.description">
            Aplicativo demonstrativo do Sistema Operacional Marco, com AppBase local-first
            carregando mini-apps habilitados por tenant e respeitando os contratos do
            blueprint consolidado.
          </p>
        </div>
      </div>
      <div class="status-area">
        <span
          class="status-indicator"
          data-ref="status-indicator"
          data-i18n="status.indicator"
        >
          Sess√£o ativa
        </span>
        <label class="locale-switcher">
          <span class="sr-only" data-i18n="controls.locale.label">Idioma</span>
          <select data-action="change-locale">
            <option value="pt-BR" data-i18n="controls.locale.ptBR">Portugu√™s (Brasil)</option>
            <option value="en-US" data-i18n="controls.locale.enUS">English (US)</option>
          </select>
        </label>
        <button
          type="button"
          class="theme-toggle"
          data-action="toggle-theme"
          aria-pressed="false"
        >
          <span class="theme-toggle__icon" aria-hidden="true">üåì</span>
          <span data-theme-label data-i18n="controls.theme.light">Modo claro</span>
        </button>
        <div class="status-meta">
          <span data-ref="status-tenant" data-i18n="status.tenant">Tenant:</span>
          <span data-ref="status-user" data-i18n="status.user">Usu√°rio:</span>
          <span data-ref="status-storage" data-i18n="status.storage">Armazenamento vinculado:</span>
          <span data-ref="status-sync" data-i18n="status.sync">√öltimo sync:</span>
          <span data-ref="status-ready" data-i18n="status.ready">Tempo at√© READY:</span>
        </div>
      </div>
    </header>

    <main>
      <section id="tela-principal" class="view active">
        <div class="main-layout">
          <section class="card app-block miniapp-list">
            <header>
              <h3 data-i18n="home.summary.title">Mini-app resumos</h3>
              <p>
                <span data-ref="miniapp-count">0</span>
                <span data-i18n="home.summary.connector"> habilitados para </span>
                <span data-ref="summary-tenant">-</span>
              </p>
            </header>
            <div class="miniapp-rail" id="mini-app-grid"></div>
          </section>
          <section class="card app-block app-metrics">
            <header>
              <span class="eyebrow" data-i18n="home.metrics.eyebrow">Indicadores</span>
              <h2 data-i18n="home.metrics.title">Snapshot operacional</h2>
              <p data-i18n="home.metrics.description">
                Resumo r√°pido de fluxo, capacidade e alertas do tenant ativo.
              </p>
            </header>
            <div class="app-metrics-grid">
              <article class="app-metric">
                <span data-i18n="home.metrics.taskFlow">Fluxo de tarefas</span>
                <strong data-ref="metric-task-flow">‚Äî</strong>
              </article>
              <article class="app-metric">
                <span data-i18n="home.metrics.capacity">Capacidade</span>
                <strong data-ref="metric-capacity">‚Äî</strong>
              </article>
              <article class="app-metric">
                <span data-i18n="home.metrics.alerts">Alertas</span>
                <strong data-ref="metric-alerts">‚Äî</strong>
              </article>
            </div>
            <div class="app-metrics-highlights">
              <article class="app-highlight">
                <span data-i18n="home.metrics.approvals">Aprova√ß√µes</span>
                <strong data-ref="highlight-approvals">‚Äî</strong>
              </article>
              <article class="app-highlight">
                <span data-i18n="home.metrics.fieldTeams">Equipes em campo</span>
                <strong data-ref="highlight-field-teams">‚Äî</strong>
              </article>
              <article class="app-highlight">
                <span data-i18n="home.metrics.priorityTasks">Tarefas cr√≠ticas</span>
                <strong data-ref="highlight-priority">‚Äî</strong>
              </article>
            </div>
          </section>
          <section class="card app-block client-panel">
            <header>
              <span class="eyebrow" data-i18n="home.client.eyebrow">Painel cliente</span>
              <h2 data-i18n="home.client.title">Painel principal</h2>
              <p data-i18n="home.client.description">
                √Årea reservada para os componentes do cliente conforme o desenho base.
              </p>
            </header>
            <div class="placeholder-area large"></div>
          </section>
          <section
            class="card app-block miniapp-panel is-collapsed"
            id="miniapp-panel-card"
            aria-live="polite"
          >
            <header class="miniapp-panel-header">
              <div class="miniapp-panel-context">
                <span
                  class="mini-app-chip"
                  data-panel-chip
                  data-i18n="panel.placeholder.chip"
                >
                  Mini-app n√£o selecionado
                </span>
                <button
                  type="button"
                  class="icon-button"
                  data-panel-menu
                  aria-label="Abrir MiniAppPanel"
                  aria-expanded="false"
                >
                  <svg viewBox="0 0 16 16" aria-hidden="true">
                    <path
                      d="M2.5 8a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm4 0a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm4 0a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z"
                    />
                  </svg>
                  <span class="sr-only" data-i18n="panel.placeholder.toggle">Alternar MiniAppPanel</span>
                </button>
              </div>
              <div class="miniapp-panel-meta">
                <p data-panel-meta data-i18n="panel.placeholder.meta">
                  Selecione um mini-app na coluna √† esquerda para visualizar os masters.
                </p>
                <button
                  type="button"
                  class="pill-button miniapp-panel-close"
                  data-panel-close
                  hidden
                  data-i18n="panel.placeholder.close"
                >
                  Fechar painel
                </button>
              </div>
            </header>
            <div class="miniapp-panel-body">
              <div class="panel-placeholder" data-panel-placeholder data-i18n="panel.placeholder.body">
                Selecione um mini-app na coluna √† esquerda e utilize o menu de tr√™s pontos para abrir o MiniAppPanel.
              </div>
              <div class="panel-content" data-panel-content hidden></div>
            </div>
          </section>
        </div>
      </section>

      <template id="panel-template-operations">
        <div class="master-grid">
          <div class="master-card">
            <h3 data-i18n="panel.operations.kpis">KPIs do sistema</h3>
            <div class="empty-slot"></div>
          </div>
          <div class="master-card">
            <h3 data-i18n="panel.operations.data">Dados / Resumos</h3>
            <div class="empty-slot"></div>
          </div>
          <div class="master-card">
            <h3 data-i18n="panel.operations.other">Outros pain√©is</h3>
            <div class="empty-slot"></div>
          </div>
        </div>
        <div class="expansion-master">
          <h3 data-i18n="panel.operations.expand">√Årea p/ expandir</h3>
          <div class="empty-slot tall"></div>
        </div>
      </template>

      <template id="panel-template-tasks">
        <p class="panel-note" data-i18n="panel.tasks.note">
          O painel mestre do Gestor de Tarefas apresentar√° filtros, status e pr√≥ximos cards definidos nesta fase.
        </p>
        <div class="placeholder-area large"></div>
      </template>

      <template id="panel-template-account">
        <p class="panel-note" data-i18n="panel.account.note">
          √Årea reservada para vincular dispositivos, backups e livros-raz√£o diretamente no painel central.
        </p>
        <div class="placeholder-area large"></div>
      </template>

      <template id="panel-template-market">
        <p class="panel-note" data-i18n="panel.market.note">
          Em breve: cat√°logo compacto para habilitar ou revogar licen√ßas sem sair da Home.
        </p>
        <div class="placeholder-area large"></div>
      </template>

      <template id="panel-template-settings">
        <p class="panel-note" data-i18n="panel.settings.note">
          Configura√ß√µes r√°pidas do tenant, schemas registrados e observabilidade sumarizada aparecer√£o aqui.
        </p>
        <div class="placeholder-area large"></div>
      </template>

      <section id="mini-app-painel" class="view">
        <section class="card">
          <header>
            <div>
              <h2 data-i18n="operations.header.title">Mini-app ‚Ä¢ Painel de Opera√ß√µes</h2>
              <p class="breadcrumbs">
                <span data-i18n="breadcrumbs.home">Home</span><span data-i18n="breadcrumbs.miniapps">Mini-apps</span
                ><span data-i18n="operations.header.breadcrumb">Painel de Opera√ß√µes</span>
              </p>
            </div>
            <div class="panel-actions">
              <button
                type="button"
                data-export-button
                data-export-target="mini-app-painel"
                data-i18n="operations.actions.export"
              >
                Exportar painel
              </button>
            </div>
          </header>
          <p class="panel-note" data-i18n="operations.note">
            Masters base preparados para receber os subcards.
          </p>
          <div class="master-grid">
            <div class="master-card">
              <h3 data-i18n="operations.card.kpis">KPIs do sistema</h3>
              <div class="empty-slot"></div>
            </div>
            <div class="master-card">
              <h3 data-i18n="operations.card.data">Dados / Resumos</h3>
              <div class="empty-slot"></div>
            </div>
            <div class="master-card">
              <h3 data-i18n="operations.card.other">Outros pain√©is</h3>
              <div class="empty-slot"></div>
            </div>
          </div>
          <div class="expansion-master">
            <h3 data-i18n="operations.card.expand">√Årea p/ expandir</h3>
            <div class="empty-slot tall"></div>
          </div>
          <a class="back-action" data-action="home" href="#">
            <svg viewBox="0 0 20 20" aria-hidden="true">
              <path
                d="M12.707 15.707a1 1 0 01-1.414 0L5.586 10l5.707-5.707a1 1 0 111.414 1.414L8.414 10l4.293 4.293a1 1 0 010 1.414z"
              />
            </svg>
            <span data-i18n="shared.backToHome">Voltar para a tela principal</span>
          </a>
        </section>
      </section>

      <section id="mini-app-tarefas" class="view">
        <section class="card">
          <header>
            <div>
              <h2 data-i18n="tasks.header.title">Mini-app ‚Ä¢ Gestor de Tarefas</h2>
              <p class="breadcrumbs">
                <span data-i18n="breadcrumbs.home">Home</span><span data-i18n="breadcrumbs.miniapps">Mini-apps</span
                ><span data-i18n="tasks.header.breadcrumb">Gestor de Tarefas</span>
              </p>
            </div>
            <div class="panel-actions">
              <button type="button" data-i18n="tasks.actions.create">Criar nova tarefa</button>
              <button
                type="button"
                data-export-button
                data-export-target="mini-app-tarefas"
                data-i18n="tasks.actions.export"
              >
                Exportar planilha
              </button>
            </div>
          </header>

          <div class="chip-row" style="margin-top: 16px">
            <span class="chip info" data-i18n="tasks.filters.today">Filtro: Hoje</span>
            <span class="chip neutral" data-i18n="tasks.filters.owner">Owner: Todos</span>
            <span class="chip warning" data-i18n="tasks.filters.critical">4 itens cr√≠ticos</span>
          </div>

          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th scope="col" data-i18n="tasks.table.tasks">Tarefas</th>
                  <th scope="col" data-i18n="tasks.table.owners">Respons√°veis</th>
                  <th scope="col" data-i18n="tasks.table.dates">Datas</th>
                  <th scope="col" data-i18n="tasks.table.status">Status</th>
                  <th scope="col" data-i18n="tasks.table.data">Dados consumidos</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Revisar contrato principal</strong></td>
                  <td>Carla Nogueira</td>
                  <td>12/03 ‚Üí 14/03</td>
                  <td>
                    <span class="status-indicator status-indicator--info" data-i18n="tasks.status.inProgress">Em curso</span>
                  </td>
                  <td>Base jur√≠dica v2</td>
                </tr>
                <tr>
                  <td><strong>Sincronizar planilha de fornecedores</strong></td>
                  <td>Equipe Opera√ß√µes</td>
                  <td>12/03 ‚Üí 13/03</td>
                  <td>
                    <span class="status-indicator status-indicator--success" data-i18n="tasks.status.done">Conclu√≠do</span>
                  </td>
                  <td>Invent√°rio homologado</td>
                </tr>
                <tr>
                  <td><strong>Testar backups incrementais</strong></td>
                  <td>Marcos Lima</td>
                  <td>11/03 ‚Üí 15/03</td>
                  <td>
                    <span class="status-indicator status-indicator--warning" data-i18n="tasks.status.warning">Aten√ß√£o</span>
                  </td>
                  <td>Snapshots AWS 22h</td>
                </tr>
                <tr>
                  <td><strong>Validar checklist de campo</strong></td>
                  <td>Fernanda Dias</td>
                  <td>10/03 ‚Üí 12/03</td>
                  <td>
                    <span class="status-indicator status-indicator--danger" data-i18n="tasks.status.critical">Cr√≠tico</span>
                  </td>
                  <td>Dossi√™ Equipes Norte</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="system-tips">
            <h4 data-i18n="tasks.tips.title">Dicas do sistema</h4>
            <ul>
              <li data-i18n="tasks.tips.item1">Use filtros por status para focar nos itens cr√≠ticos do dia.</li>
              <li data-i18n="tasks.tips.item2">Os cart√µes de dados consumidos indicam a fonte principal da tarefa.</li>
              <li data-i18n="tasks.tips.item3">Atualiza√ß√µes autom√°ticas acontecem a cada 15 minutos.</li>
            </ul>
          </div>

          <a class="back-action" data-action="home" href="#">
            <svg viewBox="0 0 20 20" aria-hidden="true">
              <path
                d="M12.707 15.707a1 1 0 01-1.414 0L5.586 10l5.707-5.707a1 1 0 111.414 1.414L8.414 10l4.293 4.293a1 1 0 010 1.414z"
              />
            </svg>
            <span data-i18n="shared.backToHome">Voltar para a tela principal</span>
          </a>
        </section>
      </section>

      <section id="mini-app-conta" class="view">
        <section class="card">
          <header>
            <div>
              <h2 data-i18n="account.header.title">Mini-app ‚Ä¢ Conta & Backup</h2>
              <p class="breadcrumbs">
                <span data-i18n="breadcrumbs.home">Home</span><span data-i18n="breadcrumbs.miniapps">Mini-apps</span
                ><span data-i18n="account.header.breadcrumb">Conta & Backup</span>
              </p>
            </div>
            <div class="panel-actions">
              <button
                type="button"
                data-export-button
                data-export-target="mini-app-conta"
                data-i18n="account.actions.export"
              >
                Exportar relat√≥rio
              </button>
              <button type="button" data-i18n="account.actions.magicLink">Gerar link m√°gico</button>
              <button type="button" data-i18n="account.actions.unlink">Desvincular dispositivo</button>
            </div>
          </header>

          <div class="grid-two">
            <div class="data-card">
              <h4 data-i18n="account.identity.title">Identidade & Sess√£o</h4>
              <ul>
                <li>
                  <span data-i18n="account.identity.tenant">Tenant atual:</span>
                  <strong data-ref="detail-tenant">-</strong>
                </li>
                <li>
                  <span data-i18n="account.identity.user">Usu√°rio autenticado:</span>
                  <strong data-ref="detail-user">-</strong>
                </li>
                <li>
                  <span data-i18n="account.identity.login">Login unificado:</span>
                  <span data-ref="detail-logins">-</span>
                </li>
                <li>
                  <span data-i18n="account.identity.kiosk">Modo quiosque:</span>
                  <span data-ref="detail-kiosk">-</span>
                </li>
              </ul>
            </div>
            <div class="data-card">
              <h4 data-i18n="account.backup.title">Backup & Storage</h4>
              <ul>
                <li>
                  <span data-i18n="account.backup.state">Backup autom√°tico:</span>
                  <strong data-ref="detail-backup">-</strong>
                </li>
                <li>
                  <span data-i18n="account.backup.files">Arquivos sincronizados:</span>
                  <span data-ref="detail-files">-</span>
                </li>
                <li>
                  <span data-i18n="account.backup.export">√öltima exporta√ß√£o:</span>
                  <span data-ref="detail-export">-</span>
                </li>
              </ul>
            </div>
          </div>

          <div class="storage-grid" id="storage-grid"></div>

          <div class="grid-two">
            <div class="data-card">
              <h4 data-i18n="account.devices.title">Dispositivos ativos</h4>
              <div class="device-list" id="device-list"></div>
            </div>
            <div class="data-card">
              <h4 data-i18n="account.audit.title">Livro-raz√£o de conformidade</h4>
              <ul class="timeline" id="audit-timeline"></ul>
            </div>
          </div>

          <div class="system-tips">
            <h4 data-i18n="account.tips.title">Direitos do titular prontos para 1 clique</h4>
            <ul>
              <li data-i18n="account.tips.item1">Acesso completo aos dados exportando o envelope √∫nico.</li>
              <li data-i18n="account.tips.item2">Retifica√ß√£o centralizada com versionamento por schema.</li>
              <li data-i18n="account.tips.item3">Exclus√£o total com janela de seguran√ßa e recibo.</li>
            </ul>
          </div>

          <a class="back-action" data-action="home" href="#">
            <svg viewBox="0 0 20 20" aria-hidden="true">
              <path
                d="M12.707 15.707a1 1 0 01-1.414 0L5.586 10l5.707-5.707a1 1 0 111.414 1.414L8.414 10l4.293 4.293a1 1 0 010 1.414z"
              />
            </svg>
            <span data-i18n="shared.backToHome">Voltar para a tela principal</span>
          </a>
        </section>
      </section>

      <section id="mini-app-market" class="view">
        <section class="card">
          <header>
            <div>
              <h2 data-i18n="market.header.title">Mini-app ‚Ä¢ Marketplace</h2>
              <p class="breadcrumbs">
                <span data-i18n="breadcrumbs.home">Home</span><span data-i18n="breadcrumbs.miniapps">Mini-apps</span
                ><span data-i18n="market.header.breadcrumb">Marketplace</span>
              </p>
            </div>
            <div class="panel-actions">
              <button type="button" data-i18n="market.actions.refresh">Atualizar cat√°logos</button>
              <button type="button" data-i18n="market.actions.viewLicenses">Ver licen√ßas ativas</button>
            </div>
          </header>

          <div class="market-grid" id="market-grid"></div>

          <div class="system-tips">
            <h4 data-i18n="market.tips.title">Como funciona o marketplace</h4>
            <ul>
              <li data-i18n="market.tips.item1">Mini-apps obrigat√≥rios ficam bloqueados para desativa√ß√£o.</li>
              <li data-i18n="market.tips.item2">Ativa√ß√µes refletem imediatamente na Home e no AppBase.</li>
              <li data-i18n="market.tips.item3">
                Licen√ßas adicionais habilitam recursos como backup multi-dispositivo.
              </li>
            </ul>
          </div>

          <a class="back-action" data-action="home" href="#">
            <svg viewBox="0 0 20 20" aria-hidden="true">
              <path
                d="M12.707 15.707a1 1 0 01-1.414 0L5.586 10l5.707-5.707a1 1 0 111.414 1.414L8.414 10l4.293 4.293a1 1 0 010 1.414z"
              />
            </svg>
            <span data-i18n="shared.backToHome">Voltar para a tela principal</span>
          </a>
        </section>
      </section>

      <section id="mini-app-config" class="view">
        <section class="card">
          <header>
            <div>
              <h2 data-i18n="config.header.title">Mini-app ‚Ä¢ Configura√ß√£o & Opera√ß√£o</h2>
              <p class="breadcrumbs">
                <span data-i18n="breadcrumbs.home">Home</span><span data-i18n="breadcrumbs.miniapps">Mini-apps</span
                ><span data-i18n="config.header.breadcrumb">Configura√ß√£o</span>
              </p>
            </div>
            <div class="panel-actions">
              <button
                type="button"
                data-export-button
                data-export-target="mini-app-config"
                data-i18n="config.actions.export"
              >
                Exportar config
              </button>
              <button type="button" data-i18n="config.actions.audit">Ver auditoria</button>
            </div>
          </header>

          <div class="config-block">
            <h4 data-i18n="config.snapshot.title">Configura√ß√£o resolvida</h4>
            <pre id="config-json"></pre>
          </div>

          <div class="grid-two">
            <div class="data-card">
              <h4 data-i18n="config.checklist.title">Checklist LGPD-first</h4>
              <ul>
                <li data-i18n="config.checklist.item1">Consentimentos com recibo individual</li>
                <li data-i18n="config.checklist.item2">Exporta√ß√£o 1-clique no envelope comum</li>
                <li data-i18n="config.checklist.item3">Reten√ß√£o configur√°vel por MiniApp</li>
              </ul>
            </div>
            <div class="data-card">
              <h4 data-i18n="config.observability.title">Observabilidade</h4>
              <ul>
                <li data-i18n="config.observability.item1">Eventos cr√≠ticos monitorados em tempo real</li>
                <li data-i18n="config.observability.item2">KPIs alinhados ao blueprint R1.0</li>
                <li data-i18n="config.observability.item3">Logs assinados por tenant e usu√°rio</li>
              </ul>
            </div>
          </div>

          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th scope="col" data-i18n="config.table.event">Evento</th>
                  <th scope="col" data-i18n="config.table.last">√öltima captura</th>
                  <th scope="col" data-i18n="config.table.notes">Notas</th>
                </tr>
              </thead>
              <tbody id="observability-table"></tbody>
            </table>
          </div>

          <a class="back-action" data-action="home" href="#">
            <svg viewBox="0 0 20 20" aria-hidden="true">
              <path
                d="M12.707 15.707a1 1 0 01-1.414 0L5.586 10l5.707-5.707a1 1 0 111.414 1.414L8.414 10l4.293 4.293a1 1 0 010 1.414z"
              />
            </svg>
            <span data-i18n="shared.backToHome">Voltar para a tela principal</span>
          </a>
        </section>
      </section>
    </main>

    <footer>
      <div class="footer-brand">
        <img
          src="https://5horas.com.br/wp-content/uploads/2025/09/Logo-Banner2.png"
          alt="Logo 5horas"
          loading="lazy"
        />
      </div>
      <div class="footer-content">
        <span data-i18n="footer.copyright">¬© 2024 Marco ‚Ä¢ Sistema Operacional Modular</span>
        <span data-i18n="footer.version">Vers√£o 0.2.0 ‚Ä¢ Prot√≥tipo naveg√°vel AppBase + MiniApps</span>
      </div>
    </footer>

    <div
      class="export-feedback"
      data-export-feedback
      hidden
      role="status"
      aria-live="polite"
      aria-atomic="true"
    >
      <span class="export-feedback__icon" data-export-icon aria-hidden="true">‚è≥</span>
      <span data-export-message>Preparando exporta√ß√£o‚Ä¶</span>
    </div>

        <script type="module" src="./scripts/main.js"></script>

  </body>
</html>
